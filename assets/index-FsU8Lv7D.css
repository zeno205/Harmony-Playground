.piano-wrapper{background:linear-gradient(180deg,#1a1a2e,#0f0f1a);border-radius:12px;padding:20px;overflow-x:auto}.piano-keyboard{position:relative;height:200px;min-width:700px;-webkit-user-select:none;user-select:none}.white-keys{display:flex;height:100%;gap:0}.black-keys{position:absolute;top:0;left:0;right:0;height:65%;pointer-events:none}.piano-key{position:relative;display:flex;align-items:flex-end;justify-content:center;padding-bottom:8px;transition:all .08s ease;cursor:pointer;pointer-events:auto}.piano-key.white{flex:1;background:linear-gradient(180deg,#fff,#f5f5f5 85%,#e0e0e0);border-radius:0 0 6px 6px;box-shadow:0 3px 5px #00000040,inset 0 -3px 6px #00000014,inset 0 1px #fffc;border-right:1px solid rgba(0,0,0,.08)}.piano-key.white:hover{background:linear-gradient(180deg,#f8f8f8,#e8e8e8 85%,#d0d0d0)}.piano-key.white.in-scale{background:linear-gradient(180deg,#dbeafe,#93c5fd 85%,#60a5fa)}.piano-key.white.played{background:linear-gradient(180deg,#ff9575,#ff7a59);box-shadow:0 0 20px #ff7a59b3,inset 0 1px 2px #ffffff4d;transform:translateY(2px)}.piano-key.black{position:absolute;height:100%;background:linear-gradient(180deg,#2a2a3a,#1a1a2a,#0a0a15);border-radius:0 0 4px 4px;box-shadow:0 4px 8px #00000080,inset 0 1px 2px #ffffff14,inset 0 -2px 3px #0006;z-index:2;transform:translate(-50%)}.piano-key.black:hover{background:linear-gradient(180deg,#454555,#252535,#151520)}.piano-key.black.in-scale{background:linear-gradient(180deg,#60a5fa,#3b82f6,#2563eb)}.piano-key.black.played{background:linear-gradient(180deg,#ff7a59,#f97316);box-shadow:0 0 16px #ff7a59cc,inset 0 1px 2px #fff3;transform:translate(-50%) translateY(2px)}.key-label{font-size:10px;font-weight:600;pointer-events:none;opacity:.4;transition:opacity .15s}.piano-key.white .key-label{color:#666}.piano-key.black .key-label{color:#888;margin-bottom:4px}.piano-key.played .key-label{color:#fff;opacity:1}@media(max-width:768px){.piano-keyboard{height:130px;min-width:550px}.key-label{font-size:7px}}.chord-grid-container{display:flex;flex-direction:column;gap:24px}.chord-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:12px}.chord-card{position:relative;background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:12px;padding:16px 12px;text-align:center;cursor:pointer;transition:all .15s ease;display:flex;flex-direction:column;align-items:center;gap:6px;overflow:hidden;font-family:inherit;color:inherit}.chord-card:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:var(--chord-color);opacity:.6;transition:opacity .15s,height .15s}.chord-card:hover{transform:translateY(-3px);border-color:var(--chord-color);box-shadow:0 8px 24px var(--chord-glow)}.chord-card:hover:before{opacity:1}.chord-card.active{background:var(--chord-color);border-color:var(--chord-color);transform:scale(.97);box-shadow:0 0 32px var(--chord-glow)}.chord-card.active:before{height:100%;opacity:0}.chord-degree{position:absolute;top:8px;right:10px;font-size:10px;font-weight:600;color:var(--text-muted);opacity:.6}.chord-card.active .chord-degree{color:#ffffffb3}.chord-card.custom-chord .chord-degree{right:32px}.remove-custom-chord{position:absolute;top:6px;right:6px;width:20px;height:20px;border:none;background:#ef4444cc;color:#fff;border-radius:50%;font-size:16px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s;opacity:.7;font-weight:700;padding:0}.remove-custom-chord:hover{opacity:1;background:#ef4444;transform:scale(1.1)}.chord-card.custom-chord{border-style:dashed;border-width:2px}.chord-card.custom-chord:hover{border-style:solid}.chord-roman{font-size:1rem;font-weight:600;color:var(--text-muted);line-height:1;margin-top:4px}.chord-card.active .chord-roman{color:#ffffffd9}.chord-name{font-size:1.15rem;color:var(--text-primary);font-weight:700;margin-top:2px;letter-spacing:.2px}.chord-card.active .chord-name{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.15)}.chord-notes{font-size:.7rem;color:var(--text-muted);letter-spacing:.5px;margin-top:4px}.chord-card.active .chord-notes{color:#fffc}.chord-shortcut{margin-top:8px}.chord-shortcut kbd{background:#0000004d;padding:3px 10px;border-radius:4px;font-size:11px;font-weight:600;color:var(--text-muted);font-family:inherit;border:1px solid rgba(255,255,255,.1)}.chord-card.active .chord-shortcut kbd{background:#fff3;color:#fff;border-color:#ffffff4d}.additional-chords-section{border-top:1px solid rgba(255,255,255,.1);padding-top:16px}.additional-chords-label{font-size:.8rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:12px;font-weight:600}.additional-chords-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}.chord-card.additional-chord{border-style:dashed;border-width:2px}.chord-card.additional-chord:hover{border-style:solid}.chord-card.additional-chord .chord-roman{display:none}@media(max-width:900px){.chord-grid{grid-template-columns:repeat(4,1fr)}.additional-chords-grid{grid-template-columns:repeat(3,1fr)}}@media(max-width:600px){.chord-grid{grid-template-columns:repeat(3,1fr);gap:8px}.additional-chords-grid{grid-template-columns:repeat(2,1fr);gap:8px}.chord-card{padding:12px 8px}.chord-roman{font-size:.95rem}.chord-name{font-size:1rem}}.key-selector{display:flex;align-items:flex-start;gap:32px;flex-wrap:wrap}.selector-group{display:flex;flex-direction:column;gap:10px}.selector-group label{font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-muted);font-weight:600}.key-wheel{display:flex;gap:4px;flex-wrap:wrap;max-width:320px}.key-btn{width:38px;height:38px;border:1px solid var(--border-color);background:var(--bg-elevated);color:var(--text-secondary);border-radius:8px;cursor:pointer;font-size:13px;font-weight:600;font-family:inherit;transition:all .12s ease}.key-btn.sharp{background:var(--bg-tertiary);color:var(--text-muted)}.key-btn:hover{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff;transform:translateY(-1px)}.key-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff;box-shadow:0 4px 16px var(--accent-glow)}.mode-toggle{display:flex;gap:8px}.mode-btn{display:flex;align-items:center;gap:8px;padding:10px 20px;border:1px solid var(--border-color);background:var(--bg-elevated);color:var(--text-secondary);border-radius:10px;cursor:pointer;font-size:13px;font-weight:600;font-family:inherit;transition:all .12s ease}.mode-icon{font-size:16px}.mode-btn:hover{border-color:var(--border-hover);color:var(--text-primary)}.mode-btn.active{background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border-color:transparent;color:#fff;box-shadow:0 4px 16px var(--accent-glow)}@media(max-width:768px){.key-selector{flex-direction:column;gap:20px;width:100%}.key-wheel{max-width:100%}.mode-toggle{width:100%}.mode-btn{flex:1;justify-content:center}}.synth-controls{display:flex;align-items:flex-start;gap:32px;flex-wrap:wrap}.control-group{display:flex;flex-direction:column;gap:10px}.control-group label{font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-muted);font-weight:600}.audio-controls{display:flex;flex-direction:column;gap:12px}.audio-control-item{display:flex;flex-direction:column;gap:8px}.instrument-buttons{display:flex;gap:6px;flex-wrap:wrap}.instrument-btn{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 10px;background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:8px;cursor:pointer;transition:all .12s ease;font-family:inherit;min-width:54px}.instrument-btn:hover{border-color:var(--border-hover);background:var(--bg-tertiary)}.instrument-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);box-shadow:0 4px 12px var(--accent-glow)}.inst-icon{font-size:18px;line-height:1}.inst-label{font-size:9px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px}.instrument-btn.active .inst-label{color:#ffffffe6}.slider-container{display:flex;align-items:center;gap:12px}.reverb-slider{width:120px;height:6px;-webkit-appearance:none;appearance:none;background:var(--bg-elevated);border-radius:3px;outline:none;cursor:pointer}.reverb-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent-primary);cursor:pointer;box-shadow:0 2px 8px var(--accent-glow);transition:transform .1s ease}.reverb-slider::-webkit-slider-thumb:hover{transform:scale(1.1)}.reverb-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--accent-primary);cursor:pointer;border:none;box-shadow:0 2px 8px var(--accent-glow)}.volume-slider{width:120px;height:6px;-webkit-appearance:none;appearance:none;background:var(--bg-elevated);border-radius:3px;outline:none;cursor:pointer}.volume-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent-primary);cursor:pointer;box-shadow:0 2px 8px var(--accent-glow);transition:transform .1s ease}.volume-slider::-webkit-slider-thumb:hover{transform:scale(1.1)}.volume-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--accent-primary);cursor:pointer;border:none;box-shadow:0 2px 8px var(--accent-glow)}.slider-value{font-size:12px;font-weight:600;color:var(--text-secondary);min-width:40px;text-align:right}@media(max-width:768px){.synth-controls{width:100%;gap:20px}.instrument-buttons{flex-wrap:wrap}.slider-container{width:100%}.reverb-slider{flex:1}}.display-mode{display:flex;gap:6px}.display-btn{padding:6px 8px;border-radius:6px;border:1px solid var(--border-color);background:var(--bg-elevated);cursor:pointer;font-weight:700;min-width:36px}.display-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff;box-shadow:0 4px 10px var(--accent-glow)}.voicing-editor{display:flex;flex-direction:column;gap:1rem;padding:1.5rem;background:var(--bg-elevated);border-radius:12px;border:1px solid rgba(255,255,255,.1)}.voicing-editor-header{display:flex;justify-content:space-between;align-items:center;gap:1rem}.voicing-editor-title{display:flex;flex-direction:column;gap:.25rem}.voicing-editor-title h3{margin:0;font-size:1.1rem;font-weight:600;color:var(--text-primary)}.voicing-editor-chord-name{font-size:.9rem;color:var(--text-secondary);font-weight:500}.voicing-editor-reset-btn{padding:.5rem 1rem;background:var(--accent-primary);color:#fff;border:none;border-radius:6px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s ease;white-space:nowrap}.voicing-editor-reset-btn:hover:not(:disabled){background:var(--accent-hover);transform:translateY(-1px)}.voicing-editor-reset-btn:disabled{opacity:.4;cursor:not-allowed}.voicing-editor-info{display:flex;justify-content:space-between;align-items:center;gap:1rem;padding:.75rem;background:#ffffff0d;border-radius:8px;font-size:.85rem}.voicing-editor-info p{margin:0;color:var(--text-secondary)}.voicing-editor-selected-count{font-weight:600;color:var(--accent-primary)}.voicing-editor-keyboard-container{overflow-x:auto;overflow-y:hidden;padding:1rem 0;background:#0003;border-radius:8px}.voicing-editor-keyboard{position:relative;min-width:800px;height:140px;margin:0 auto}.voicing-editor-white-keys{display:flex;position:relative;height:100%;gap:2px}.voicing-editor-white-key{flex:1;background:#fff;border:2px solid #333;border-radius:0 0 4px 4px;cursor:pointer;transition:all .15s ease;position:relative;display:flex;align-items:flex-end;justify-content:center;padding-bottom:8px}.voicing-editor-white-key:hover{background:#f0f0f0;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.voicing-editor-white-key.selected{background:var(--accent-primary);border-color:var(--accent-primary);box-shadow:0 0 12px var(--accent-primary)}.voicing-editor-white-key.selected:hover{background:var(--accent-hover)}.voicing-editor-key-label{font-size:.7rem;font-weight:600;color:#666;-webkit-user-select:none;user-select:none}.voicing-editor-white-key.selected .voicing-editor-key-label{color:#fff}.voicing-editor-black-keys{position:absolute;top:0;left:0;right:0;height:60%;pointer-events:none}.voicing-editor-black-key{position:absolute;width:2.5%;height:100%;background:#222;border:2px solid #000;border-radius:0 0 4px 4px;cursor:pointer;transition:all .15s ease;transform:translate(-50%);pointer-events:all;z-index:10}.voicing-editor-black-key:hover{background:#444;transform:translate(-50%) translateY(-2px);box-shadow:0 4px 8px #0006}.voicing-editor-black-key.selected{background:var(--accent-primary);border-color:var(--accent-primary);box-shadow:0 0 12px var(--accent-primary)}.voicing-editor-black-key.selected:hover{background:var(--accent-hover)}.voicing-editor-selected-notes{padding:.75rem;background:#ffffff0d;border-radius:8px;font-size:.85rem;color:var(--text-secondary);word-break:break-word}.voicing-editor-selected-notes strong{color:var(--text-primary)}.voicing-editor-empty{font-style:italic;opacity:.6}@media(max-width:900px){.voicing-editor{padding:1rem}.voicing-editor-header{flex-direction:column;align-items:stretch}.voicing-editor-reset-btn{width:100%}.voicing-editor-info{flex-direction:column;text-align:center}}@media(max-width:600px){.voicing-editor-keyboard{min-width:600px}.voicing-editor-title h3{font-size:1rem}}.chord-library-modal-overlay{position:fixed;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.chord-library-modal{background:var(--bg-primary);border-radius:16px;box-shadow:0 20px 60px #00000080;max-width:1400px;width:100%;max-height:90vh;display:flex;flex-direction:column;overflow:hidden}.chord-library-header{padding:1.5rem;background:var(--bg-elevated);border-bottom:1px solid rgba(255,255,255,.1);display:flex;flex-direction:column;gap:1rem}.chord-library-header-top{display:flex;justify-content:space-between;align-items:center}.chord-library-header h2{margin:0;font-size:1.5rem;font-weight:700;color:var(--text-primary)}.chord-library-close-btn{width:40px;height:40px;border:none;background:#ffffff1a;color:var(--text-primary);font-size:2rem;line-height:1;border-radius:8px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.chord-library-close-btn:hover{background:#f003;color:#ff6b6b;transform:scale(1.1)}.chord-library-controls{display:flex;gap:1rem;flex-wrap:wrap}.chord-library-search{flex:1;min-width:250px;padding:.75rem 1rem;background:var(--bg-primary);border:2px solid rgba(255,255,255,.1);border-radius:8px;color:var(--text-primary);font-size:.95rem;transition:all .2s ease}.chord-library-search:focus{outline:none;border-color:var(--accent-primary);box-shadow:0 0 0 3px #14b8a61a}.chord-library-search::placeholder{color:var(--text-secondary);opacity:.6}.chord-library-filter-toggle{display:flex;background:var(--bg-primary);border-radius:8px;overflow:hidden;border:2px solid rgba(255,255,255,.1)}.chord-library-filter-toggle button{padding:.75rem 1.5rem;background:transparent;border:none;color:var(--text-secondary);font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s ease;white-space:nowrap}.chord-library-filter-toggle button:not(:last-child){border-right:1px solid rgba(255,255,255,.1)}.chord-library-filter-toggle button:hover{background:#ffffff0d;color:var(--text-primary)}.chord-library-filter-toggle button.active{background:var(--accent-primary);color:#fff}.chord-library-stats{font-size:.85rem;color:var(--text-secondary);text-align:center}.chord-library-content{display:grid;grid-template-columns:1fr 450px;gap:1.5rem;padding:1.5rem;overflow:hidden}.chord-library-grid-container{overflow-y:auto;overflow-x:hidden;padding-right:.5rem}.chord-library-empty{text-align:center;padding:3rem 1rem;color:var(--text-secondary);font-style:italic}.chord-library-category{margin-bottom:2rem}.chord-library-category h3{margin:0 0 1rem;font-size:1.1rem;font-weight:600;color:var(--text-primary);padding-bottom:.5rem;border-bottom:2px solid rgba(255,255,255,.1)}.chord-library-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:.75rem}.chord-library-item{position:relative;padding:1rem .5rem;background:var(--bg-elevated);border:2px solid rgba(255,255,255,.1);border-radius:8px;color:var(--text-primary);font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s ease;text-align:center;display:flex;flex-direction:column;align-items:center;gap:.25rem}.chord-library-item:hover{background:#ffffff14;transform:translateY(-2px);box-shadow:0 4px 12px #0003;border-color:#fff3}.chord-library-item.selected{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff;transform:scale(1.05);box-shadow:0 4px 16px var(--accent-glow)}.chord-library-item.custom{border-color:gold}.chord-library-item-name{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}.chord-library-item-badge{position:absolute;top:4px;right:4px;color:gold;font-size:.8rem}.chord-library-voicing-panel{display:flex;flex-direction:column;gap:1rem;overflow-y:auto;padding-right:.5rem}.chord-library-voicing-actions{display:flex;flex-direction:column;gap:.75rem}.chord-library-add-btn{width:100%;padding:1rem;background:var(--accent-primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease}.chord-library-add-btn:hover:not(:disabled){background:var(--accent-hover);transform:translateY(-2px);box-shadow:0 4px 16px var(--accent-glow)}.chord-library-add-btn:disabled{opacity:.4;cursor:not-allowed}.chord-library-grid-btn{width:100%;padding:.85rem 1rem;background:#10b981;color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease}.chord-library-grid-btn:hover:not(:disabled){background:#059669;transform:translateY(-1px)}.chord-library-grid-btn:disabled{opacity:.5;cursor:not-allowed}.chord-library-grid-btn.added{background:#10b9814d;color:#10b981}.add-to-grid-hint{font-size:.8rem;color:var(--text-muted);text-align:center;margin:0}.add-to-grid-hint kbd{background:#ffffff1a;padding:2px 6px;border-radius:4px;font-size:.75rem;margin:0 2px;border:1px solid rgba(255,255,255,.2)}.chord-library-grid-container::-webkit-scrollbar,.chord-library-voicing-panel::-webkit-scrollbar{width:8px}.chord-library-grid-container::-webkit-scrollbar-track,.chord-library-voicing-panel::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.chord-library-grid-container::-webkit-scrollbar-thumb,.chord-library-voicing-panel::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.chord-library-grid-container::-webkit-scrollbar-thumb:hover,.chord-library-voicing-panel::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@media(max-width:1200px){.chord-library-content{grid-template-columns:1fr 380px}.chord-library-grid{grid-template-columns:repeat(auto-fill,minmax(70px,1fr))}}@media(max-width:900px){.chord-library-modal{max-height:95vh}.chord-library-content{grid-template-columns:1fr;gap:1rem}.chord-library-voicing-panel{display:none}.chord-library-grid{grid-template-columns:repeat(auto-fill,minmax(75px,1fr))}}@media(max-width:600px){.chord-library-modal-overlay{padding:0}.chord-library-modal{border-radius:0;max-height:100vh;height:100vh}.chord-library-header,.chord-library-content{padding:1rem}.chord-library-controls{flex-direction:column}.chord-library-search{width:100%;min-width:0}.chord-library-filter-toggle{width:100%}.chord-library-filter-toggle button{flex:1;padding:.75rem .5rem;font-size:.85rem}.chord-library-grid{grid-template-columns:repeat(auto-fill,minmax(65px,1fr));gap:.5rem}.chord-library-item{padding:.75rem .25rem;font-size:.85rem}}.slot-assignment-section{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.slot-assignment-section h4{margin:0 0 .5rem;font-size:.95rem;font-weight:600;color:var(--text-primary)}.slot-assignment-hint{margin:0 0 1rem;font-size:.85rem;color:var(--text-muted)}.slot-buttons{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem}.slot-btn{position:relative;aspect-ratio:1;background:var(--bg-primary);border:2px solid rgba(255,255,255,.15);border-radius:8px;color:var(--text-primary);font-weight:600;cursor:pointer;transition:all .15s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.5rem;font-size:1rem}.slot-btn:hover{background:#14b8a633;border-color:var(--accent-primary);transform:translateY(-2px)}.slot-btn.occupied{border-color:#f59e0b80;background:#f59e0b1a}.slot-btn.assigned-here{background:#10b98133;border-color:#10b981;border-width:3px}.slot-btn.assigned-here:hover{background:#10b9814d}.slot-number{font-size:1.2rem;font-weight:700}.slot-indicator{position:absolute;top:4px;right:4px;color:#10b981;font-size:.9rem;font-weight:700}.slot-current-chord{font-size:.65rem;color:var(--text-muted);margin-top:2px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.voicing-editor-modal-overlay{position:fixed;inset:0;background-color:#000000bf;display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.voicing-editor-modal-content{background:var(--bg-secondary, #1a1a1a);border-radius:12px;max-width:900px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #00000080}.voicing-editor-modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--border-color, #333)}.voicing-editor-modal-header h2{margin:0;font-size:1.5rem;font-weight:600;color:var(--text-primary, #fff)}.voicing-editor-modal-close{background:none;border:none;color:var(--text-secondary, #aaa);cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}.voicing-editor-modal-close:hover{background:var(--hover-bg, rgba(255, 255, 255, .1));color:var(--text-primary, #fff)}.voicing-editor-modal-body{padding:24px;overflow-y:auto}.edit-mode-toolbar{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:12px;margin-bottom:16px}.edit-mode-btn{display:flex;align-items:center;gap:8px;padding:10px 16px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-secondary);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.edit-mode-btn:hover{background:var(--bg-tertiary);border-color:var(--border-hover);color:var(--text-primary)}.edit-mode-btn.active{background:var(--accent-primary);border-color:var(--accent-primary);color:#fff;box-shadow:0 0 16px var(--accent-glow)}.edit-mode-btn svg{flex-shrink:0}.edit-mode-hint{flex:1;font-size:.85rem;color:var(--text-muted);text-align:right;padding-right:8px;animation:fadeIn .3s ease}@media(max-width:768px){.edit-mode-toolbar{flex-direction:column;align-items:stretch;gap:8px}.edit-mode-btn{justify-content:center}.edit-mode-hint{text-align:center;padding-right:0}}*{box-sizing:border-box}:root{--bg-primary: #0d0d14;--bg-secondary: #12121c;--bg-tertiary: #181825;--bg-card: #1e1e2e;--bg-elevated: #252536;--accent-primary: #14b8a6;--accent-secondary: #60a5fa;--accent-hover: #0d9488;--accent-glow: rgba(20, 184, 166, .4);--text-primary: #f0f0f5;--text-secondary: #a0a0b8;--text-muted: #6c6c8a;--border-color: rgba(255, 255, 255, .06);--border-hover: rgba(255, 255, 255, .12);--success: #22c55e;--warning: #f59e0b;--played-color: #ff7a59;--cequiv-color: #f97316}.app{min-height:100vh;background:var(--bg-primary);color:var(--text-primary);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.app-header{background:var(--bg-secondary);border-bottom:1px solid var(--border-color);padding:16px 24px;position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.header-content{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}.logo-section{display:flex;align-items:center;gap:12px}.logo-icon{width:44px;height:44px;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff;box-shadow:0 4px 16px var(--accent-glow)}.logo-text h1{margin:0;font-size:1.5rem;font-weight:700;letter-spacing:-.5px}.tagline{margin:2px 0 0;font-size:.8rem;color:var(--text-muted);font-weight:500}.quick-help{display:flex;gap:20px}.help-item{font-size:.8rem;color:var(--text-muted)}.help-item kbd{background:var(--bg-elevated);padding:3px 8px;border-radius:4px;font-family:inherit;font-size:.75rem;color:var(--text-secondary);border:1px solid var(--border-color);margin-right:6px}.app-main{max-width:1400px;margin:0 auto;padding:24px;display:flex;flex-direction:column;gap:24px}.controls-panel{background:var(--bg-card);border-radius:16px;border:1px solid var(--border-color);padding:20px 24px;display:flex;align-items:center;gap:24px;flex-wrap:wrap}.panel-divider{width:1px;height:48px;background:var(--border-color)}.library-control{display:flex;align-items:center}.library-btn{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:1rem 1.5rem;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border:none;border-radius:12px;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px var(--accent-glow)}.library-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #14b8a680}.library-btn:active{transform:translateY(0)}.library-btn-icon{font-size:1.5rem}.library-btn-count{font-size:.75rem;opacity:.9;font-weight:500}.chords-panel,.keyboard-panel{background:var(--bg-card);border-radius:16px;border:1px solid var(--border-color);padding:24px}.panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.panel-header h2{margin:0;font-size:1rem;font-weight:600;color:var(--text-primary);display:flex;align-items:center;gap:10px}.key-badge{background:var(--accent-primary);color:#fff;padding:4px 10px;border-radius:6px;font-weight:700;font-size:.9rem}.mode-badge{background:var(--bg-elevated);color:var(--text-secondary);padding:4px 10px;border-radius:6px;font-weight:500;font-size:.85rem;text-transform:capitalize}.legend-inline{display:flex;align-items:center;gap:16px;font-size:.8rem;color:var(--text-muted)}.legend-item{display:inline-flex;align-items:center;gap:6px}.legend-dot{width:12px;height:12px;border-radius:3px;display:inline-block}.legend-dot.played{background:var(--played-color)}.legend-dot.scale{background:var(--accent-secondary)}.info-panel{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}.info-card{background:var(--bg-card);border-radius:16px;border:1px solid var(--border-color);padding:24px}.info-card h3{margin:0 0 16px;font-size:.85rem;text-transform:uppercase;letter-spacing:1px;color:var(--accent-secondary);font-weight:600}.shortcuts-grid{display:flex;flex-direction:column;gap:14px}.shortcut-row{display:flex;align-items:center;gap:16px}.shortcut-row .keys{display:flex;gap:4px;flex-shrink:0}.shortcut-row kbd{min-width:26px;height:26px;background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:5px;display:flex;align-items:center;justify-content:center;font-family:inherit;font-size:.75rem;font-weight:600;color:var(--text-secondary)}.shortcut-row span{font-size:.85rem;color:var(--text-muted)}.scale-notes{margin:0 0 12px;font-size:1rem;color:var(--text-primary);line-height:1.6}.theory-hint{margin:0;font-size:.85rem;color:var(--text-muted);line-height:1.6}.app-footer{text-align:center;padding:24px;color:var(--text-muted);font-size:.8rem;border-top:1px solid var(--border-color);margin-top:16px}@media(max-width:900px){.header-content{flex-direction:column;gap:12px}.quick-help{flex-wrap:wrap;justify-content:center;gap:12px}.controls-panel{flex-direction:column;align-items:stretch}.panel-divider{width:100%;height:1px}}@media(max-width:600px){.app-main{padding:16px;gap:16px}.chords-panel,.keyboard-panel,.info-card{padding:16px}.logo-text h1{font-size:1.25rem}}.key-capture-overlay{position:fixed;inset:0;background-color:#000000d9;display:flex;align-items:center;justify-content:center;z-index:3000;animation:fadeIn .2s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.key-capture-content{background:var(--bg-secondary);border:2px solid var(--accent-primary);border-radius:16px;padding:40px;max-width:500px;text-align:center;box-shadow:0 20px 60px #14b8a64d;animation:slideUp .3s ease}@keyframes slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.key-capture-content h2{margin:0 0 24px;font-size:1.5rem;color:var(--accent-primary)}.key-capture-info{margin-bottom:32px}.chord-name-display{font-size:1.75rem;font-weight:600;color:var(--text-primary);margin:0 0 16px}.current-key-display{font-size:1.1rem;color:var(--text-secondary);margin:0 0 24px}.current-key-display kbd{font-size:1.2rem;padding:8px 16px;background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:6px;margin-left:8px}.instruction{font-size:1rem;color:var(--text-primary);margin:8px 0}.instruction.secondary{font-size:.9rem;color:var(--text-muted)}.instruction kbd{padding:4px 8px;background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:4px;font-family:monospace}.cancel-rebind-btn{background:var(--bg-elevated);border:1px solid var(--border-color);color:var(--text-secondary);padding:12px 32px;border-radius:8px;font-size:1rem;cursor:pointer;transition:all .2s ease}.cancel-rebind-btn:hover{background:var(--bg-tertiary);border-color:var(--border-hover);color:var(--text-primary)}
